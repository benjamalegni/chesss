{"ast":null,"code":"import'./Chessboard.css';import Tile from'../Tile/Tile';import Referee from'../../referee/Referee';import{useEffect,useRef,useState}from'react';import{XAXIS,YAXIS,TeamType,PieceType,initialBoardState,GRIDSIZE,samePosition}from'../../Constants';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Chessboard(_ref){let{online}=_ref;const[activePiece,setActivePiece]=useState(null);const[grabPosition,setGrabPosition]=useState({x:-1,y:-1});const[pieces,setPieces]=useState(initialBoardState);const chessboardRef=useRef(null);const referee=new Referee();const[promotionPawn,setPromotionPawn]=useState();const modalRef=useRef(null);const[currentTurn,setCurrentTurn]=useState('white');const[lastMove,setLastMove]=useState(null);const[awaitingPromotion,setAwaitingPromotion]=useState(false);function getAllowedTeamForMe(){if(!online||online.status!=='playing'||!online.myColor){return null;}return online.myColor==='white'?TeamType.OUR:TeamType.OPPONENT;}function isMyTurn(){if(!online||online.status!=='playing'||!online.myColor){return true;// offline mode: always allowed\n}return online.myColor===currentTurn;}useEffect(()=>{if(online&&online.status==='playing'){setCurrentTurn('white');}},[online]);useEffect(()=>{const s=online===null||online===void 0?void 0:online.socket;if(!s)return;const onMove=msg=>{try{if(msg.type==='move'){// compatibility if server sends type wrapper\n}const from=msg.from;const to=msg.to;const promotion=msg.promotionType;setPieces(currentPieces=>{let updated=currentPieces;const movingPiece=updated.find(p=>samePosition(p.position,from));if(!movingPiece){return updated;}const isEnPassantMove=Referee.isEnPassantMove(from,to,movingPiece.type,movingPiece.team,updated);const pawnDirecion=movingPiece.team===TeamType.OUR?1:-1;if(isEnPassantMove){updated=updated.reduce((results,piece)=>{if(samePosition(piece.position,from)){piece.enPassant=false;piece.position.x=to.x;piece.position.y=to.y;results.push(piece);}else if(!samePosition(piece.position,{x:to.x,y:to.y-pawnDirecion})){if(piece.type===PieceType.PAWN){piece.enPassant=false;}results.push(piece);}return results;},[]);}else{updated=updated.reduce((results,piece)=>{if(samePosition(piece.position,from)){piece.enPassant=Math.abs(from.y-to.y)===2&&piece.type===PieceType.PAWN;piece.position.x=to.x;piece.position.y=to.y;results.push(piece);}else if(!samePosition(piece.position,to)){if(piece.type===PieceType.PAWN){piece.enPassant=false;}results.push(piece);}return results;},[]);}if(promotion!==undefined){const promoted=updated.find(p=>samePosition(p.position,to));if(promoted){promoted.type=promotion;const teamType=promoted.team===TeamType.OUR?\"w\":\"b\";let image=\"\";switch(promotion){case PieceType.ROOK:image=\"rook\";break;case PieceType.BISHOP:image=\"bishop\";break;case PieceType.KNIGHT:image=\"knight\";break;case PieceType.QUEEN:image=\"queen\";break;}if(image){promoted.image=`${process.env.PUBLIC_URL}/assets/images/${image}_${teamType}.svg`;}}}return updated;});setCurrentTurn(prev=>prev==='white'?'black':'white');}catch(_e){// ignore\n}};s.on('move',onMove);return()=>{s.off('move',onMove);};},[online===null||online===void 0?void 0:online.socket,online===null||online===void 0?void 0:online.roomId]);function updateValidMoves(){setPieces(currentPieces=>{return currentPieces.map(p=>{p.possibleMoves=referee.getValidMoves(p,currentPieces);return p;});});}function pickTileFromCursor(clientX,clientY){const chessboard=chessboardRef.current;if(!chessboard)return{x:-1,y:-1};const rect=chessboard.getBoundingClientRect();const relX=clientX-rect.left;const relY=clientY-rect.top;const x=Math.floor(relX/GRIDSIZE);const y=Math.abs(Math.ceil((relY-rect.height)/GRIDSIZE));// invert axis\nreturn{x,y};}function grabPiece(e){updateValidMoves();const chessboard=chessboardRef.current;const element=e.target;if(element.classList.contains(\"chess-piece\")&&chessboard){const{x:grabX,y:grabY}=pickTileFromCursor(e.clientX,e.clientY);const pieceAtTile=pieces.find(p=>samePosition(p.position,{x:grabX,y:grabY}));// Online restrictions\nif(online&&online.status==='playing'){const myTeam=getAllowedTeamForMe();if(!isMyTurn()||myTeam===null||!pieceAtTile||pieceAtTile.team!==myTeam){return;// can't grab\n}}setGrabPosition({x:grabX,y:grabY});const x=e.clientX-GRIDSIZE/2;const y=e.clientY-GRIDSIZE/2;element.style.position=\"absolute\";// position relative to the chessboard container\nconst boardRect=chessboard.getBoundingClientRect();element.style.left=`${x-boardRect.left}px`;element.style.top=`${y-boardRect.top}px`;element.style.zIndex='1000';setActivePiece(element);}}function movePiece(e){const chessboard=chessboardRef.current;if(activePiece&&chessboard){const x=e.clientX-GRIDSIZE/2;const y=e.clientY-GRIDSIZE/2;const rect=chessboard.getBoundingClientRect();const minX=0;const minY=0;const maxX=rect.width-GRIDSIZE;const maxY=rect.height-GRIDSIZE;activePiece.style.position=\"absolute\";// x axis limits\nif(x-rect.left<minX){activePiece.style.left=`${minX}px`;}else if(x-rect.left>maxX){activePiece.style.left=`${maxX}px`;}else{activePiece.style.left=`${x-rect.left}px`;}// y axis limits\nif(y-rect.top<minY){activePiece.style.top=`${minY}px`;}else if(y-rect.top>maxY){activePiece.style.top=`${maxY}px`;}else{activePiece.style.top=`${y-rect.top}px`;}}}function dropPiece(e){const chessboard=chessboardRef.current;if(activePiece&&chessboard){const{x,y}=pickTileFromCursor(e.clientX,e.clientY);const currentPiece=pieces.find(p=>samePosition(p.position,grabPosition));if(currentPiece){const validMove=referee.isValidMove(grabPosition,{x,y},currentPiece.type,currentPiece.team,pieces);const isEnPassantMove=Referee.isEnPassantMove(grabPosition,{x,y},currentPiece.type,currentPiece.team,pieces);const pawnDirecion=currentPiece.team===TeamType.OUR?1:-1;if(online&&online.status==='playing'){const myTeam=getAllowedTeamForMe();if(!isMyTurn()||myTeam===null||currentPiece.team!==myTeam){// Reset piece position and bail\nactivePiece.style.position='relative';activePiece.style.removeProperty(\"top\");activePiece.style.removeProperty(\"left\");activePiece.style.removeProperty(\"z-index\");setActivePiece(null);return;}}if(isEnPassantMove){const updatedPieces=pieces.reduce((results,piece)=>{if(samePosition(piece.position,grabPosition)){piece.enPassant=false;piece.position.x=x;piece.position.y=y;results.push(piece);}else if(!samePosition(piece.position,{x,y:y-pawnDirecion})){if(piece.type===PieceType.PAWN){piece.enPassant=false;}results.push(piece);}return results;},[]);setPieces(updatedPieces);setLastMove({from:grabPosition,to:{x,y}});if(!online||online.status!=='playing'){// offline toggle turn for consistency\nsetCurrentTurn(prev=>prev==='white'?'black':'white');}else{var _online$socket;// send immediately (no promotion possible on en passant)\n(_online$socket=online.socket)===null||_online$socket===void 0?void 0:_online$socket.emit('move',{roomId:online.roomId,from:grabPosition,to:{x,y}});setCurrentTurn(prev=>prev==='white'?'black':'white');}}else if(validMove){const updatedPieces=pieces.reduce((results,piece)=>{if(samePosition(piece.position,grabPosition)){// SPECIAL MOVE\npiece.enPassant=Math.abs(grabPosition.y-y)===2&&piece.type===PieceType.PAWN;piece.position.x=x;piece.position.y=y;// pawn promotion row\nlet promotionRow=piece.team===TeamType.OUR?7:0;if(y===promotionRow&&piece.type===PieceType.PAWN){var _modalRef$current;//make promotion\n(_modalRef$current=modalRef.current)===null||_modalRef$current===void 0?void 0:_modalRef$current.classList.remove(\"hidden\");setPromotionPawn(piece);setAwaitingPromotion(true);}results.push(piece);}else if(!samePosition(piece.position,{x,y})){if(piece.type===PieceType.PAWN){piece.enPassant=false;}results.push(piece);}return results;},[]);setPieces(updatedPieces);setLastMove({from:grabPosition,to:{x,y}});if(!awaitingPromotion){if(!online||online.status!=='playing'){setCurrentTurn(prev=>prev==='white'?'black':'white');}else{var _online$socket2;// no promotion: send immediately\n(_online$socket2=online.socket)===null||_online$socket2===void 0?void 0:_online$socket2.emit('move',{roomId:online.roomId,from:grabPosition,to:{x,y}});setCurrentTurn(prev=>prev==='white'?'black':'white');}}}else{//reset piece position\nactivePiece.style.position='relative';activePiece.style.removeProperty(\"top\");activePiece.style.removeProperty(\"left\");activePiece.style.removeProperty(\"z-index\");}}setActivePiece(null);}}function promotePawn(pieceType){var _modalRef$current2;if(promotionPawn===undefined){return;}const updatedPieces=pieces.reduce((results,piece)=>{if(samePosition(piece.position,promotionPawn===null||promotionPawn===void 0?void 0:promotionPawn.position)){piece.type=pieceType;const teamType=piece.team===TeamType.OUR?\"w\":\"b\";let image=\"\";switch(pieceType){case PieceType.ROOK:{image=\"rook\";break;}case PieceType.BISHOP:{image=\"bishop\";break;}case PieceType.KNIGHT:{image=\"knight\";break;}case PieceType.QUEEN:{image=\"queen\";break;}}piece.image=`${process.env.PUBLIC_URL}/assets/images/${image}_${teamType}.svg`;}results.push(piece);return results;},[]);setPieces(updatedPieces);(_modalRef$current2=modalRef.current)===null||_modalRef$current2===void 0?void 0:_modalRef$current2.classList.add(\"hidden\");setAwaitingPromotion(false);if(online&&online.status==='playing'&&lastMove){var _online$socket3;(_online$socket3=online.socket)===null||_online$socket3===void 0?void 0:_online$socket3.emit('move',{roomId:online.roomId,from:lastMove.from,to:lastMove.to,promotionType:pieceType});setCurrentTurn(prev=>prev==='white'?'black':'white');}else if(!online||online.status!=='playing'){setCurrentTurn(prev=>prev==='white'?'black':'white');}}function promotionTeamType(){return(promotionPawn===null||promotionPawn===void 0?void 0:promotionPawn.team)===TeamType.OUR?\"w\":\"b\";}let board=[];for(let y=YAXIS.length-1;y>=0;y--){for(let x=0;x<XAXIS.length;x++){// check whether the sum of numbers x,y is even to draw each tile\nconst isEven=(x+y+2)%2===0;let img=undefined;pieces.forEach(p=>{if(samePosition(p.position,{x:x,y:y})){img=p.image;}});let currentPiece=pieces.find(p=>samePosition(p.position,grabPosition));let highlight=currentPiece!==null&&currentPiece!==void 0&&currentPiece.possibleMoves?currentPiece.possibleMoves.some(p=>samePosition(p,{x:x,y:y})):false;const targetHasPiece=pieces.some(p=>samePosition(p.position,{x,y}));const capture=highlight&&targetHasPiece;board.push(/*#__PURE__*/_jsx(Tile,{isEven:isEven,image:img,highlight:highlight,capture:capture},`${x},${y}`));}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"pawn-promotion-modal\",className:\"hidden\",ref:modalRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"img\",{onClick:()=>promotePawn(PieceType.ROOK),src:`${process.env.PUBLIC_URL}/assets/images/rook_${promotionTeamType()}.svg`,alt:\"promote rook\"}),/*#__PURE__*/_jsx(\"img\",{onClick:()=>promotePawn(PieceType.BISHOP),src:`${process.env.PUBLIC_URL}/assets/images/bishop_${promotionTeamType()}.svg`,alt:\"promote bishop\"}),/*#__PURE__*/_jsx(\"img\",{onClick:()=>promotePawn(PieceType.KNIGHT),src:`${process.env.PUBLIC_URL}/assets/images/knight_${promotionTeamType()}.svg`,alt:\"promote knight\"}),/*#__PURE__*/_jsx(\"img\",{onClick:()=>promotePawn(PieceType.QUEEN),src:`${process.env.PUBLIC_URL}/assets/images/queen_${promotionTeamType()}.svg`,alt:\"promote queen\"})]})}),/*#__PURE__*/_jsx(\"div\",{onMouseMove:e=>movePiece(e),onMouseDown:e=>grabPiece(e),onMouseUp:e=>dropPiece(e),id:\"chessboard\",ref:chessboardRef,children:board})]});}","map":{"version":3,"names":["Tile","Referee","useEffect","useRef","useState","XAXIS","YAXIS","TeamType","PieceType","initialBoardState","GRIDSIZE","samePosition","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Chessboard","_ref","online","activePiece","setActivePiece","grabPosition","setGrabPosition","x","y","pieces","setPieces","chessboardRef","referee","promotionPawn","setPromotionPawn","modalRef","currentTurn","setCurrentTurn","lastMove","setLastMove","awaitingPromotion","setAwaitingPromotion","getAllowedTeamForMe","status","myColor","OUR","OPPONENT","isMyTurn","s","socket","onMove","msg","type","from","to","promotion","promotionType","currentPieces","updated","movingPiece","find","p","position","isEnPassantMove","team","pawnDirecion","reduce","results","piece","enPassant","push","PAWN","Math","abs","undefined","promoted","teamType","image","ROOK","BISHOP","KNIGHT","QUEEN","process","env","PUBLIC_URL","prev","_e","on","off","roomId","updateValidMoves","map","possibleMoves","getValidMoves","pickTileFromCursor","clientX","clientY","chessboard","current","rect","getBoundingClientRect","relX","left","relY","top","floor","ceil","height","grabPiece","e","element","target","classList","contains","grabX","grabY","pieceAtTile","myTeam","style","boardRect","zIndex","movePiece","minX","minY","maxX","width","maxY","dropPiece","currentPiece","validMove","isValidMove","removeProperty","updatedPieces","_online$socket","emit","promotionRow","_modalRef$current","remove","_online$socket2","promotePawn","pieceType","_modalRef$current2","add","_online$socket3","promotionTeamType","board","length","isEven","img","forEach","highlight","some","targetHasPiece","capture","children","id","className","ref","onClick","src","alt","onMouseMove","onMouseDown","onMouseUp"],"sources":["/home/Outer/Documents/chesss/src/components/Chessboard/Chessboard.tsx"],"sourcesContent":["import './Chessboard.css';\nimport Tile from '../Tile/Tile'\nimport Referee from '../../referee/Referee'\nimport { useEffect, useRef, useState } from 'react';\nimport { XAXIS, YAXIS, Piece, TeamType, PieceType, initialBoardState, Position, GRIDSIZE, samePosition } from '../../Constants';\nimport type { Socket } from 'socket.io-client';\n\ninterface OnlineProps{\n\tsocket: Socket | null;\n\tstatus: 'offline' | 'waiting' | 'playing';\n\troomId?: string;\n\tmyColor?: 'white' | 'black';\n}\n\nexport default function Chessboard({ online }: { online?: OnlineProps }){\nconst [activePiece, setActivePiece] = useState<HTMLElement | null>(null)\nconst [grabPosition, setGrabPosition] = useState<Position>({x:-1, y:-1});\nconst [pieces, setPieces] = useState<Piece[]>(initialBoardState);\nconst chessboardRef = useRef<HTMLDivElement>(null);\nconst referee = new Referee();\nconst [promotionPawn, setPromotionPawn] = useState<Piece>();\nconst modalRef = useRef<HTMLDivElement>(null);\nconst [currentTurn, setCurrentTurn] = useState<'white'|'black'>('white');\nconst [lastMove, setLastMove] = useState<{from: Position, to: Position} | null>(null);\nconst [awaitingPromotion, setAwaitingPromotion] = useState<boolean>(false);\n\nfunction getAllowedTeamForMe(): TeamType | null{\n\tif(!online || online.status !== 'playing' || !online.myColor){\n\t\treturn null;\n\t}\n\treturn online.myColor === 'white' ? TeamType.OUR : TeamType.OPPONENT;\n}\n\nfunction isMyTurn(): boolean{\n\tif(!online || online.status !== 'playing' || !online.myColor){\n\t\treturn true; // offline mode: always allowed\n\t}\n\treturn online.myColor === currentTurn;\n}\n\nuseEffect(()=>{\n\tif(online && online.status === 'playing'){\n\t\tsetCurrentTurn('white');\n\t}\n}, [online]);\n\nuseEffect(()=>{\n\tconst s = online?.socket;\n\tif(!s) return;\n\tconst onMove = (msg: any) => {\n\t\ttry{\n\t\t\tif(msg.type === 'move'){\n\t\t\t\t// compatibility if server sends type wrapper\n\t\t\t}\n\t\t\tconst from: Position = msg.from;\n\t\t\tconst to: Position = msg.to;\n\t\t\tconst promotion: PieceType | undefined = msg.promotionType;\n\t\t\tsetPieces((currentPieces)=>{\n\t\t\t\tlet updated = currentPieces;\n\t\t\t\tconst movingPiece = updated.find(p=> samePosition(p.position, from));\n\t\t\t\tif(!movingPiece){\n\t\t\t\t\treturn updated;\n\t\t\t\t}\n\t\t\t\tconst isEnPassantMove = Referee.isEnPassantMove(from, to, movingPiece.type, movingPiece.team, updated);\n\t\t\t\tconst pawnDirecion = movingPiece.team === TeamType.OUR?1:-1;\n\t\t\t\tif(isEnPassantMove){\n\t\t\t\t\tupdated = updated.reduce((results, piece)=>{\n\t\t\t\t\t\tif(samePosition(piece.position, from)){\n\t\t\t\t\t\t\tpiece.enPassant=false;\n\t\t\t\t\t\t\tpiece.position.x=to.x;\n\t\t\t\t\t\t\tpiece.position.y=to.y;\n\t\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t\t}else if(!samePosition(piece.position, {x: to.x, y: to.y - pawnDirecion})){\n\t\t\t\t\t\t\tif(piece.type===PieceType.PAWN){\n\t\t\t\t\t\t\t\tpiece.enPassant=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}, [] as Piece[]);\n\t\t\t\t} else {\n\t\t\t\t\tupdated = updated.reduce((results, piece)=>{\n\t\t\t\t\t\tif(samePosition(piece.position, from)){\n\t\t\t\t\t\t\tpiece.enPassant = Math.abs(from.y - to.y)===2 && (piece.type===PieceType.PAWN);\n\t\t\t\t\t\t\tpiece.position.x = to.x;\n\t\t\t\t\t\t\tpiece.position.y = to.y;\n\t\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t\t} else if(!samePosition(piece.position, to)){\n\t\t\t\t\t\t\tif(piece.type===PieceType.PAWN){\n\t\t\t\t\t\t\t\tpiece.enPassant=false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}, [] as Piece[]);\n\t\t\t\t}\n\t\t\t\tif(promotion !== undefined){\n\t\t\t\t\tconst promoted = updated.find(p=> samePosition(p.position, to));\n\t\t\t\t\tif(promoted){\n\t\t\t\t\t\tpromoted.type = promotion;\n\t\t\t\t\t\tconst teamType = (promoted.team === TeamType.OUR)?\"w\":\"b\";\n\t\t\t\t\t\tlet image = \"\";\n\t\t\t\t\t\tswitch(promotion){\n\t\t\t\t\t\t\tcase PieceType.ROOK: image = \"rook\"; break;\n\t\t\t\t\t\t\tcase PieceType.BISHOP: image = \"bishop\"; break;\n\t\t\t\t\t\t\tcase PieceType.KNIGHT: image = \"knight\"; break;\n\t\t\t\t\t\t\tcase PieceType.QUEEN: image = \"queen\"; break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(image){\n\t\t\t\t\t\t\tpromoted.image = `${process.env.PUBLIC_URL}/assets/images/${image}_${teamType}.svg`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn updated;\n\t\t\t});\n\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t}catch(_e){\n\t\t\t// ignore\n\t\t}\n\t};\n\ts.on('move', onMove);\n\treturn () => {\n\t\ts.off('move', onMove);\n\t};\n}, [online?.socket, online?.roomId]);\n\nfunction updateValidMoves(){\n\tsetPieces((currentPieces) => {\n\t\treturn currentPieces.map(p=>{\n\t\t\tp.possibleMoves = referee.getValidMoves(p, currentPieces);\n\t\t\treturn p;\n\n\t\t});\n\t});\n}\n\nfunction pickTileFromCursor(clientX: number, clientY: number){\n\tconst chessboard = chessboardRef.current;\n\tif(!chessboard) return { x: -1, y: -1 };\n\tconst rect = chessboard.getBoundingClientRect();\n\tconst relX = clientX - rect.left;\n\tconst relY = clientY - rect.top;\n\tconst x = Math.floor(relX / GRIDSIZE);\n\tconst y = Math.abs(Math.ceil((relY - rect.height)/GRIDSIZE)); // invert axis\n\treturn { x, y };\n}\n\nfunction grabPiece(e: React.MouseEvent){\n\tupdateValidMoves();\n\n\tconst chessboard = chessboardRef.current;\n\tconst element = e.target as HTMLElement;\n\n\tif(element.classList.contains(\"chess-piece\") && chessboard){\n\t\tconst { x: grabX, y: grabY } = pickTileFromCursor(e.clientX, e.clientY);\n\t\tconst pieceAtTile = pieces.find(p => samePosition(p.position, {x: grabX, y: grabY}));\n\n\t\t// Online restrictions\n\t\tif(online && online.status === 'playing'){\n\t\t\tconst myTeam = getAllowedTeamForMe();\n\t\t\tif(!isMyTurn() || myTeam === null || !pieceAtTile || pieceAtTile.team !== myTeam){\n\t\t\t\treturn; // can't grab\n\t\t\t}\n\t\t}\n\n\t\tsetGrabPosition({x:grabX, y:grabY})\n\n\t\tconst x = e.clientX - GRIDSIZE/2;\n\t\tconst y = e.clientY - GRIDSIZE/2;\n\t\telement.style.position=\"absolute\";\n\t\t// position relative to the chessboard container\n\t\tconst boardRect = chessboard.getBoundingClientRect();\n\t\telement.style.left = `${x - boardRect.left}px`;\n\t\telement.style.top = `${y - boardRect.top}px`;\n\t\telement.style.zIndex = '1000';\n\n\t\tsetActivePiece(element);\n\t}\n}\n\nfunction movePiece(e: React.MouseEvent){\n\tconst chessboard = chessboardRef.current;\n\tif(activePiece && chessboard){\n\t\tconst x = e.clientX - GRIDSIZE/2;\n\t\tconst y = e.clientY - GRIDSIZE/2;\n\n\t\tconst rect = chessboard.getBoundingClientRect();\n\t\tconst minX = 0;\n\t\tconst minY = 0;\n\t\tconst maxX = rect.width - GRIDSIZE;\n\t\tconst maxY = rect.height - GRIDSIZE;\n\n\t\tactivePiece.style.position=\"absolute\";\n\n\t\t// x axis limits\n\t\tif((x - rect.left) < minX){\n\t\t\tactivePiece.style.left = `${minX}px`;\n\t\t} else if((x - rect.left) > maxX){\n\t\t\tactivePiece.style.left = `${maxX}px`;\n\t\t} else{\n\t\t\tactivePiece.style.left = `${x - rect.left}px`;\n\t\t}\n\n\t\t// y axis limits\n\t\tif((y - rect.top) < minY){\n\t\t\tactivePiece.style.top = `${minY}px`;\n\t\t} else if((y - rect.top) > maxY){\n\t\t\tactivePiece.style.top = `${maxY}px`;\n\t\t} else{\n\t\t\tactivePiece.style.top = `${y - rect.top}px`;\n\t\t}\n\t\t\n\t}\n}\n\nfunction dropPiece(e: React.MouseEvent){\n\tconst chessboard = chessboardRef.current;\n\tif(activePiece && chessboard){\n\t\tconst { x, y } = pickTileFromCursor(e.clientX, e.clientY);\n\n\t\tconst currentPiece = pieces.find(\n\t\t\t(p)=> samePosition(p.position, grabPosition));\n\n\t\tif(currentPiece){\n\t\t\tconst validMove = referee.isValidMove(grabPosition, {x,y}, currentPiece.type,currentPiece.team, pieces);\n\t\t\tconst isEnPassantMove = Referee.isEnPassantMove(grabPosition, {x,y},currentPiece.type,currentPiece.team, pieces)\n\t\t\tconst pawnDirecion = currentPiece.team === TeamType.OUR?1:-1;\n\n\t\t\tif(online && online.status === 'playing'){\n\t\t\t\tconst myTeam = getAllowedTeamForMe();\n\t\t\t\tif(!isMyTurn() || myTeam === null || currentPiece.team !== myTeam){\n\t\t\t\t\t// Reset piece position and bail\n\t\t\t\t\tactivePiece.style.position= 'relative';\n\t\t\t\t\tactivePiece.style.removeProperty(\"top\");\n\t\t\t\t\tactivePiece.style.removeProperty(\"left\");\n\t\t\t\t\tactivePiece.style.removeProperty(\"z-index\");\n\t\t\t\t\tsetActivePiece(null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(isEnPassantMove){\n\t\t\t\tconst updatedPieces = pieces.reduce((results, piece)=>{\n\t\t\t\t\tif(samePosition(piece.position, grabPosition)){\n\t\t\t\t\t\tpiece.enPassant=false;\n\t\t\t\t\t\tpiece.position.x=x;\n\t\t\t\t\t\tpiece.position.y=y;\n\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t}else if(!samePosition(piece.position, {x, y: y-pawnDirecion})){\n\t\t\t\t\t\tif(piece.type===PieceType.PAWN){\n\t\t\t\t\t\t\tpiece.enPassant=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t}\t\t\t\t\t\n\n\n\t\t\t\t\treturn results;\n\t\t\t\t}, [] as Piece[])\n\t\t\t\tsetPieces(updatedPieces);\n\t\t\t\tsetLastMove({from: grabPosition, to: {x, y}});\n\t\t\t\tif(!online || online.status !== 'playing'){\n\t\t\t\t\t// offline toggle turn for consistency\n\t\t\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t\t\t} else {\n\t\t\t\t\t// send immediately (no promotion possible on en passant)\n\t\t\t\t\tonline.socket?.emit('move', {\n\t\t\t\t\t\troomId: online.roomId,\n\t\t\t\t\t\tfrom: grabPosition,\n\t\t\t\t\t\tto: {x, y}\n\t\t\t\t\t});\n\t\t\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t\t\t}\n\t\t\t}else if(validMove){\n\t\t\t\tconst updatedPieces = pieces.reduce((results,piece)=>{\n\t\t\t\t\tif(samePosition(piece.position, grabPosition)){\n\t\t\t\t\t\t// SPECIAL MOVE\n\t\t\t\t\t\tpiece.enPassant = Math.abs(grabPosition.y-y)===2 &&(piece.type===PieceType.PAWN)\n\t\t\t\t\t\tpiece.position.x=x;\n\t\t\t\t\t\tpiece.position.y=y;\n\n\t\t\t\t\t\t// pawn promotion row\n\t\t\t\t\t\tlet promotionRow = piece.team === TeamType.OUR ? 7:0;\n\t\t\t\t\t\tif(y===promotionRow && piece.type === PieceType.PAWN){\n\t\t\t\t\t\t\t//make promotion\n\t\t\t\t\t\t\tmodalRef.current?.classList.remove(\"hidden\")\n\t\t\t\t\t\t\tsetPromotionPawn(piece);\n\t\t\t\t\t\t\tsetAwaitingPromotion(true);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t}else if(!(samePosition(piece.position, {x,y}))){\n\t\t\t\t\t\tif(piece.type===PieceType.PAWN){\n\t\t\t\t\t\t\tpiece.enPassant=false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresults.push(piece);\n\t\t\t\t\t}\t\t\t\t  \n\n\t\t\t\t\treturn results;\n\t\t\t\t}, [] as Piece[])\n\t\t\t\tsetPieces(updatedPieces);\n\t\t\t\tsetLastMove({from: grabPosition, to: {x, y}});\n\t\t\t\tif(!(awaitingPromotion)){\n\t\t\t\t\tif(!online || online.status !== 'playing'){\n\t\t\t\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// no promotion: send immediately\n\t\t\t\t\t\tonline.socket?.emit('move', {\n\t\t\t\t\t\t\troomId: online.roomId,\n\t\t\t\t\t\t\tfrom: grabPosition,\n\t\t\t\t\t\t\tto: {x, y}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t//reset piece position\n\t\t\t\t\tactivePiece.style.position= 'relative';\n\t\t\t\t\tactivePiece.style.removeProperty(\"top\");\n\t\t\t\t\tactivePiece.style.removeProperty(\"left\");\n\t\t\t\t\tactivePiece.style.removeProperty(\"z-index\");\n\n\t\t\t}\n\t\t}\n\n\t\t\n\t\tsetActivePiece(null);\n\t}\n}\n\n\tfunction promotePawn(pieceType: PieceType){\n\t\tif(promotionPawn===undefined){\n\t\t\treturn;\n\t\t}\n\t\tconst updatedPieces = pieces.reduce((results, piece) =>{\n\n\t\t\tif(samePosition(piece.position, promotionPawn?.position)){\n\t\t\t\tpiece.type = pieceType;\n\t\t\t\tconst teamType = (piece.team === TeamType.OUR)?\"w\":\"b\";\n\t\t\t\tlet image = \"\";\n\t\t\t\tswitch(pieceType){\n\t\t\t\t\tcase PieceType.ROOK:{\n\t\t\t\t\t\timage = \"rook\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase PieceType.BISHOP:{\n\t\t\t\t\t\timage = \"bishop\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase PieceType.KNIGHT:{\n\t\t\t\t\t\timage = \"knight\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcase PieceType.QUEEN:{\n\t\t\t\t\t\timage = \"queen\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpiece.image = `${process.env.PUBLIC_URL}/assets/images/${image}_${teamType}.svg`;\n\t\t\t}\n\n\t\t\tresults.push(piece);\n\t\t\treturn results;\n\t\t}, [] as Piece[])\n\t\tsetPieces(updatedPieces);\n\t\tmodalRef.current?.classList.add(\"hidden\");\n\t\tsetAwaitingPromotion(false);\n\t\tif(online && online.status === 'playing' && lastMove){\n\t\t\tonline.socket?.emit('move', {\n\t\t\t\troomId: online.roomId,\n\t\t\t\tfrom: lastMove.from,\n\t\t\t\tto: lastMove.to,\n\t\t\t\tpromotionType: pieceType\n\t\t\t});\n\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t} else if(!online || online.status !== 'playing'){\n\t\t\tsetCurrentTurn(prev => prev === 'white' ? 'black' : 'white');\n\t\t}\n\t}\n\n\n\tfunction promotionTeamType(){\n\t\treturn (promotionPawn?.team === TeamType.OUR)?\"w\":\"b\";\n\t}\n\n\tlet board = [];\n\n\tfor(let y= YAXIS.length-1;y>=0;y--){\n\t\tfor(let x=0;x<XAXIS.length;x++){\n\n\t\t\t// check whether the sum of numbers x,y is even to draw each tile\n\t\t\tconst isEven = (x+y+2)%2===0;\n\t\t\tlet img = undefined;\n\n\t\t\tpieces.forEach(p=> {\n\t\t\t\tif(samePosition(p.position, {x:x, y:y})){\n\t\t\t\t\timg=p.image\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tlet currentPiece = pieces.find(p=> samePosition(p.position,grabPosition));\n\t\t\tlet highlight = (currentPiece?.possibleMoves) ? currentPiece.possibleMoves.some(p=> samePosition(p, {x:x , y:y})): false;\n\t\t\tconst targetHasPiece = pieces.some(p => samePosition(p.position, {x, y}));\n\t\t\tconst capture = highlight && targetHasPiece;\n\t\t\t\n\t\t\tboard.push(\n\t\t\t\t\t<Tile key={`${x},${y}`} isEven={isEven} image={img} highlight={highlight} capture={capture}/> \n\t\t\t)\n\t\t}\n\t}       \n\n\n\treturn(\n\t\t<>\n\t\t<div id=\"pawn-promotion-modal\" className=\"hidden\" ref={modalRef}>\n\t\t\t<div className=\"modal-body\">\n\n\t\t\t<img onClick={()=> promotePawn(PieceType.ROOK)} src={`${process.env.PUBLIC_URL}/assets/images/rook_${promotionTeamType()}.svg`} alt=\"promote rook\"/>\n\t\t\t<img onClick={()=> promotePawn(PieceType.BISHOP)} src={`${process.env.PUBLIC_URL}/assets/images/bishop_${promotionTeamType()}.svg`} alt=\"promote bishop\"/>\n\t\t\t<img onClick={()=> promotePawn(PieceType.KNIGHT)} src={`${process.env.PUBLIC_URL}/assets/images/knight_${promotionTeamType()}.svg`} alt=\"promote knight\"/>\n\t\t\t<img onClick={()=> promotePawn(PieceType.QUEEN)} src={`${process.env.PUBLIC_URL}/assets/images/queen_${promotionTeamType()}.svg`} alt=\"promote queen\"/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div \n\t\t\tonMouseMove={(e)=>movePiece(e)} \n\t\t\tonMouseDown={e=> grabPiece(e)} \n\t\t\tonMouseUp={(e)=> dropPiece(e)}\n\t\t\tid=\"chessboard\"\n\t\t\tref={chessboardRef}>\n\t\t\t\t{board}\n\t\t</div>\n\t\t</>\n\t)\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}